(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{700:function(e,t,a){"use strict";a.r(t);var l=a(73),n=a(8),r=a(133),s=a(1),c=a.n(s),m=a(14),i=a(149),u=a(66),o=a(696),d=a.n(o),p=a(31),E=a(30),g=a(151),f=a(178),v=a(74),b=function(e){var t=e.itemsLoading,a=e.itemsList,l=e.itemsNames.itemsNameMult2,n=e.toggleItemEdit,r=e.toggleItemDelete;e.userTypesList;return c.a.createElement("div",{className:"mt-3"},t?c.a.createElement("div",{className:"text-center"},c.a.createElement("span",{className:"align-middle"},c.a.createElement(g.a,{size:"sm",color:"primary"})),c.a.createElement("span",{className:"align-middle preloader-text"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ",l,"...")):null,t||a.length?null:c.a.createElement("div",{className:"text-center preloader-text"},l," \u043d\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043e"),!t&&a.length?c.a.createElement("div",{className:"table-wrapper"},c.a.createElement(f.a,{bordered:!0,size:"sm",striped:!0,className:"standard-table centered"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"id"},"ID"),c.a.createElement("th",{className:"name"},"\u041b\u043e\u0433\u0438\u043d"),c.a.createElement("th",null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),c.a.createElement("th",null,"\u0418\u043c\u044f"),c.a.createElement("th",null,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("th",null,"\u041a\u043b\u0438\u0435\u043d\u0442"),c.a.createElement("th",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),c.a.createElement("th",null,"\u0413\u0440\u0443\u043f\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),c.a.createElement("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),c.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"))),c.a.createElement("tbody",null,a.map(function(e,t){return c.a.createElement("tr",{key:"user_item-".concat(t)},c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.login),c.a.createElement("td",null,e.last_name),c.a.createElement("td",null,e.first_name),c.a.createElement("td",null,e.second_name),c.a.createElement("td",null,function(e){return e.role&&1===e.role.id?"":"\u0434\u0430"}(e)),c.a.createElement("td",null,e.phone),c.a.createElement("td",null,e.role?e.role.display_name:""),c.a.createElement("td",null,e.isActive&&c.a.createElement(v.Check,{size:20,className:"text-success"})),c.a.createElement("td",{className:"table-action"},c.a.createElement(v.Edit2,{className:"align-middle mr-1 pointer",size:18,onClick:function(){return function(e){n(e)}(e)}}),c.a.createElement(v.Trash,{className:"align-middle pointer",size:18,onClick:function(){return function(e){r(e)}(e)}})))})))):null)};b.defaultProps={itemsNames:{itemsNameMult2:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0441\u043f\u0438\u0441\u043a\u0430"},itemsLoading:!1};var h=a(208),N=a(176),O=a(177),j=a(150),y=a(182),_=a(152),x=a(180),M=a(98),C=function(e){var t=e.isOpen,a=e.itemModalToggle,m=e.itemsNames.itemsNameMult2,i=e.submitItem,o=e.itemsSaving,d=e.itemData,p=e.isInitialMount,E=e.rolesList,f=e.userTypesList,v=Object(s.useState)({id:null,type:1,last_name:"",first_name:"",second_name:"",email:"",password:"",login:"",role_id:""}),b=Object(r.a)(v,2),C=b[0],S=b[1],z=function(e){var t=e.prop,a=e.val;S(function(e){return Object(n.a)({},e,Object(l.a)({},t,a))})};return Object(s.useEffect)(function(){if(!p){var e=d.role?d.role.id:"",t=Object(n.a)({},d,{role_id:e,role:null,password:""});console.log("Modal Update: ",t),S(t)}},[d]),c.a.createElement(h.a,{size:"lg",isOpen:t,toggle:a},c.a.createElement(N.a,null,c.a.createElement("span",{className:"h2"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435/\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 ",m)),c.a.createElement(O.a,{className:"m-3"},c.a.createElement(M.AvForm,{onValidSubmit:function(){var e=Object.assign({},C);i(e)}},c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{required:!0,type:"select",name:"user_type",bsSize:"lg",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",value:C.type,onChange:function(e){var t=e.target.value;S(function(e){return Object(n.a)({},e,{type:t,role_id:""})})}},f.map(function(e){return c.a.createElement("option",{key:"type-"+e.id,value:e.id},e.name)})))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_last_name",required:!0,bsSize:"lg",type:"text",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:C.last_name,onChange:function(e){z({prop:"last_name",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u0418\u043c\u044f"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_first_name",required:!0,bsSize:"lg",type:"text",placeholder:"\u0418\u043c\u044f",value:C.first_name,onChange:function(e){z({prop:"first_name",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_second_name",required:!0,bsSize:"lg",type:"text",placeholder:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:C.second_name,onChange:function(e){z({prop:"second_name",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"Email"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_email",required:!0,bsSize:"lg",type:"email",placeholder:"\u0418\u043c\u044f",value:C.email,onChange:function(e){z({prop:"email",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_password",bsSize:"lg",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:C.password,onChange:function(e){z({prop:"password",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u041b\u043e\u0433\u0438\u043d"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{name:"user_login",bsSize:"lg",type:"text",placeholder:"\u043b\u043e\u0433\u0438\u043d",value:C.login,onChange:function(e){z({prop:"login",val:e.target.value})}}))),c.a.createElement(j.a,null,c.a.createElement(y.a,{sm:3,className:"text-sm-right uppercase"},"\u0420\u043e\u043b\u044c"),c.a.createElement(_.a,{sm:7},c.a.createElement(M.AvField,{disabled:!E.length||1!==C.type,type:"select",name:"user_company",bsSize:"lg",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e",value:C.role_id,onChange:function(e){z({prop:"role_id",val:e.target.value})}},c.a.createElement("option",{value:"",disabled:!0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"),E.map(function(e,t){return c.a.createElement("option",{key:"role-"+e.id,value:e.id},e.name)})))),c.a.createElement(x.a,{row:!0},c.a.createElement(_.a,{sm:10,className:"d-flex"},c.a.createElement(u.a,{className:"ml-auto",color:"gray-400",onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),c.a.createElement(u.a,{color:"tertiary",size:"lg",disabled:o,type:"submit"},o&&c.a.createElement(g.a,{size:"sm",color:"#fff"}),!o&&c.a.createElement("span",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))))};C.defaultProps={itemsNames:{itemsNameMult2:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"}};var S=a(75),z=a(169),w=a(168),F=a(167),I=function(e){e.changeItemsFilter;var t=e.changeItemsMeta,a=(e.currentFilter.isClient,e.itemsMeta.max),l=Object(s.useState)(!1),n=Object(r.a)(l,2),m=n[0],i=n[1],u=function(e){a!==e&&t({filterName:"max",val:e})};return c.a.createElement(j.a,{className:"filterbar user-filterbar"},c.a.createElement(_.a,{xs:"12",md:"4",className:"ml-auto d-flex"},c.a.createElement(S.a,{isOpen:m,toggle:function(){return i(!m)},className:"ml-auto"},c.a.createElement(z.a,{caret:!0},a),c.a.createElement(w.a,{right:!0,className:"maxItemsMenu"},c.a.createElement(F.a,{active:10===a,onClick:function(){return u(10)}},"10"),c.a.createElement(F.a,{active:20===a,onClick:function(){return u(20)}},"20"),c.a.createElement(F.a,{active:-1===a,onClick:function(){return u(-1)}},"\u0412\u0441\u0435")))))};I.defaultProps={currentFilter:{isClient:null},itemsMeta:{max:null}};t.default=function(){var e=Object(m.useDispatch)(),t=Object(m.useSelector)(function(e){return e.users}),a=t.usersLoading,o=t.usersList,g=t.usersFilter,f=t.usersMeta,v=t.usersSaving,h=t.userTypesList,N=Object(m.useSelector)(function(e){return e.roles}).rolesList,O=Object(s.useState)(!0),j=Object(r.a)(O,2),y=j[0],_=j[1],x=Object(s.useState)(!1),M=Object(r.a)(x,2),S=M[0],z=M[1],w=Object(s.useState)({}),F=Object(r.a)(w,2),L=F[0],k=F[1],A={itemsName:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",itemsNameMult1:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",itemsNameMult2:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"},T={isClient:null,isActive:null},D={maxItems:-1};return Object(s.useEffect)(function(){if(y){if(o.length<1){var t={getParams:Object(n.a)({},g,f)};e(Object(p.b)(t))}e(Object(E.b)({getParams:Object(n.a)({},T,D)})),_(!1)}else{var a={getParams:Object(n.a)({},g,f)};e(Object(p.b)(a))}},[g,f]),Object(s.useEffect)(function(){return function(){e(Object(p.d)([]))}},[]),c.a.createElement(i.a,{fluid:!0,className:"p-0"},c.a.createElement("h1",{className:"h3 mb-3"},A.itemsNameMult1),c.a.createElement(u.a,{color:"tertiary",size:"lg",onClick:function(){return z(!0)}},c.a.createElement("span",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),c.a.createElement(I,{changeItemsMeta:function(t){var a=t.filterName,r=t.val,s=Object(n.a)({},f,Object(l.a)({},a,r));e(Object(p.f)(s))},changeItemsFilter:function(t){var a=t.filterName,r=t.val,s=Object(n.a)({},g,Object(l.a)({},a,r));e(Object(p.e)(s))},currentFilter:g,itemsMeta:f}),c.a.createElement(b,{toggleItemEdit:function(e){k(e),z(!0)},toggleItemDelete:function(t){d()({title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e ".concat(t.fullName,"?"),icon:"warning",buttons:!0,dangerMode:!0}).then(function(a){a&&e(Object(p.a)(t.id))})},itemsNames:A,itemsLoading:a,userTypesList:h,itemsList:o}),c.a.createElement(C,{isInitialMount:y,isOpen:S,itemModalToggle:function(){return z(!S)},itemsNames:A,submitItem:function(t){e(Object(p.c)({data:t})).then(function(){return z(!1)})},itemsSaving:v,itemData:L,rolesList:N,userTypesList:h}))}}}]);
//# sourceMappingURL=5.4f5b1f3a.chunk.js.map